{
  "enabled": true,
  "name": "EventType change detection",
  "description": "Monitors changes to eventType definitions and ensures consistency across components, workflows, and API integrations that depend on these event structures.",
  "version": "1",
  "when": {
    "type": "fileEdited",
    "patterns": [
      "**/eventTypes/**",
      "**/eventType.js",
      "**/events/**/*.js",
      "/apps/wf-client/**/eventTypes/**",
      "/apps/wf-plan-management/**/eventTypes/**",
      "/packages/shared-imports/src/events/**"
    ]
  },
  "then": {
    "type": "askAgent",
    "prompt": "EventType Change Detection:\n\n**Architecture Context Analysis:**\nFirst, identify which architecture is affected:\n- ğŸ—ï¸ **wf-client** (legacy architecture) - notification and impact assessment only\n- ğŸš€ **wf-plan-management** (new prototype) - full integration support\n- ğŸ“¦ **shared/packages** - affects both architectures\n\n**For wf-client changes:**\n- ğŸ“¢ Notify about breaking changes to existing eventTypes\n- ğŸ” Identify components that may be affected\n- âš ï¸ Flag potential migration considerations\n- ğŸ“‹ Document changes for future reference\n\n**For wf-plan-management changes:**\n- ğŸ¤– Full integration support and updates\n- ğŸ”„ Update dependent components automatically\n- âœ… Validate new architecture patterns\n- ğŸ”— Ensure proper shared-imports usage\n\n**User Responsibilities:**\n- âœ… Define eventType structures for both architectures\n- âœ… Decide migration strategy for wf-client eventTypes\n- âœ… Control business logic in new architecture\n\n**Kiro Actions:**\non_wf_client_change:\n- notify_breaking_changes\n- document_legacy_impacts\n- suggest_migration_path\n\non_plan_management_change:\n- validate_eventtype_structure\n- update_dependent_components\n- check_workflow_integrations\n- update_import_patterns\n\non_shared_change:\n- assess_dual_architecture_impact\n- coordinate_updates_across_apps"
  }
}