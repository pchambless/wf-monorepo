# Task Execution Request

## Task Details

**Plan**: 0040  
**Task ID**: 2.1  
**Task**: Create database table schema parser  
**Complexity**: low  
**Suggested Model**: gemini-flash  
**Estimated Tokens**: 1500-4000  
**Completed**: No  
**Requirements**: 2.4

## Task Description

- Write parser for SQL table definition files in /sql/database/api_wf/tables/
  - Extract field types, constraints, and relationships
  - Create TableSchema and DatabaseField interfaces
  - _Requirements: 2.4_
  - _Complexity: low_

## Available Tools & Patterns

### LOW Complexity Toolset

**Location**: `/home/paul/wf-monorepo-new/cli/toolsets/low-complexity`

#### Available Patterns:

```typescript
/**
 * Low Complexity Tool Set Patterns
 * For use with gemini-flash model (1500-4000 tokens)
 */

export interface BasePattern {
  operation: string;
  description: string;
  tools: string[];
}

export interface FileFinder extends BasePattern {
  operation: "find";
  pattern: string;
}

export interface ContentExtractor extends BasePattern {
  operation: "extract";
  patterns: {
    find: string | RegExp;
    capture: string[];
  }[];
}

export interface FileGenerator extends BasePattern {
  operation: "generate";
  template: string;
  variables: string[];
}

export interface Validator extends BasePattern {
  operation: "validate";
  checks: {
    type: "syntax" | "structure" | "content";
    pattern: string | RegExp;
  }[];
}

export type Pattern = FileFinder | ContentExtractor | FileGen
... (truncated)
```

#### Tool Runner:

```typescript
/**
 * Tool Set Runner
 * Executes tool patterns in a low-complexity environment
 */

import { Pattern } from './patterns';
import { getToolFunction } from '../../utils/toolManager';

interface ToolResult {
  success: boolean;
  data?: any;
  error?: string;
}

export class ToolRunner {
  async executePattern(pattern: Pattern, context: any = {}): Promise<ToolResult> {
    try {
      switch (pattern.operation) {
        case 'find':
          return await this.executeFindPattern(pattern, context);
        case 'extract':
          return await this.executeExtractPattern(pattern, context);

... (truncated)
```

**Note**: Use these patterns to structure your approach to the task. The patterns provide reusable components for common operations.

## Monorepo Context

### Project Structure

```
wf-monorepo-new/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ wf-client/          # React frontend
â”‚   â”œâ”€â”€ wf-server/          # Node.js backend
â”‚   â””â”€â”€ wf-plan-management/ # Plan management app
â”œâ”€â”€ packages/
â”‚   â””â”€â”€ shared-imports/     # Shared utilities & components
â”œâ”€â”€ cli/                    # Task routing & toolsets
â”œâ”€â”€ .kiro/                  # AI planning & coordination
â””â”€â”€ sql/                    # Database schemas & migrations
```

### Behavioral Guidelines (CLAUDE.md)

# CLAUDE.md - WhatsFresh Working Guide

_Working documentation - stays current because Claude depends on it daily_

## ðŸ§  Core Behavior

- **Tone**: Concise, technical, respectful, minimally verbose
- **Code Style**: NO comments unless explicitly requested
- **Philosophy**: MVP development - break and fix over backward compatibility
- **Modularization**: Always try to modularize code if a module gets complicated or large.

## ðŸ“– Documentation Priority

1. **`.kiro/steering.yaml`** - Live project
   ... (truncated)

### Project Patterns (steering.yaml)

established_patterns: - "SQL views drive UI generation (views â†’ directives â†’ pageMap â†’ React)" - "DirectiveMap system for field configuration rules" - "ContextStore for universal parameter resolution" - "Audit trail auto-injection (created_at/by, updated_at/by, deleted_at/by)" - "Parent keys always: type number, required true, hidden true" - "Field mapping: form fields â†’ database columns via pageMap.fieldMappings" - "EventType = pageName = viewName (unified naming)" - "Use shared workflow helpers (createDoc, createPlanImpact) over direct API calls" - "Co-located templates with workflows (Template.js pattern)" - "Impact tracking required for all file modifications" - "Browser-safe vs server-side module separation (.browser.js pattern)" - "Follow established document creation workflows over direct file operations" - "Modularization: Always modularize code when modules become large or complicated (>300 lines or multiple responsibilities)"
skip_investigation:

### Plan Context

**Design**: # Design Document

## Overview

The Automatic Impact Tracking system will monitor file modifications across the entire monorepo and automatically create impact records in the plan management system. The design integrates with the existing wf-plan-management app architecture, leveraging the estab
... (truncated)
**Requirements**: # Requirements Document

## Introduction

This feature will automatically track plan impacts whenever modules are modified during development work across the entire monorepo. Currently, impact tracking is a manual process that requires developers to remember to create impact records after making
... (truncated)

### Frequent Paths

- packages/shared-imports/src/architecture/intelligence.js"
- packages/shared-imports/src/architecture/data/madge-analysis.json"
- packages/shared-imports/src/api/index.js"
- packages/shared-imports/src/events/index.js"
- packages/shared-imports/src/stores/contextStore.js"
- apps/wf-client/src/pages/"
- apps/wf-client/src/pages/\*/pageMap.js"
- apps/wf-client/src/config/\*.js"
- apps/wf-client/src/utils/\*"

## Success Criteria

1. **Implement the task** according to the description and requirements
2. **Use available tools** from the low-complexity toolset when applicable
3. **Follow established patterns** from steering.yaml and CLAUDE.md
4. **Maintain consistency** with existing monorepo structure
5. **Document any assumptions** or decisions made during implementation
6. **Test the implementation** if testing patterns are available
7. **Update task status** to completed `[x]` when finished

## File Modification Guidelines

- **Read files first** before making changes
- **Use established patterns** from the monorepo
- **Follow naming conventions** consistent with existing code
- **Add appropriate metadata** (complexity, requirements) to new tasks if creating any
- **Reference impact tracking** requirements from CLAUDE.md if making file changes

## Expected Deliverables

Based on the task type, please provide:

- âœ… **Implementation files** (code, configs, templates as needed)
- âœ… **Brief summary** of what was implemented
- âœ… **Any assumptions** or design decisions made
- âœ… **Testing results** if applicable
- âœ… **Next steps** or dependencies for subsequent tasks

---

**Ready to implement**: Please proceed with Task 2.1 using the provided context and tools.
