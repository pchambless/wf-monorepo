# Implementation Guidance: createDoc Workflows
**Plan**: 0019  < /dev/null |  **Created**: 2025-07-26 | **Agent**: Claude

## Implementation Overview
Build createAnalysis and createGuidance functions following the proven createPlanDocument pattern. Each function should accept minimal parameters (planId, topic/component, content) and generate professional documents in the .kiro directory structure.

## Core Implementation Pattern
```javascript
export async function createAnalysis(planId, topic, analysisContent) {
  const paddedId = String(planId).padStart(4, '0');
  const safeTopic = topic.replace(/[^a-zA-Z0-9\s-]/g, '').replace(/\s+/g, '-').trim().toLowerCase();
  const fileName = `claude-analysis-${safeTopic}.md`;
  const documentContent = generateAnalysisTemplate(planId, topic, analysisContent);
  
  const result = createDoc(`.kiro/${paddedId}/analysis`, fileName, documentContent);
  return formatResponse(result, fileName, 'Analysis');
}
```

## Template Structure Requirements
- **Header**: Document type, plan reference, creation date, agent
- **Content**: User-provided content with minimal formatting
- **Sections**: Structured sections for analysis vs guidance purposes  
- **Footer**: Attribution and plan reference
- **Metadata**: Plan ID, agent identification, timestamp

## File Naming Strategy
- **Analysis**: `claude-analysis-${topic}.md` (lowercase, dash-separated)
- **Guidance**: `implementation-guidance-${component}.md` (lowercase, dash-separated)
- **Sanitization**: Remove special characters, replace spaces with dashes

## Error Handling Requirements
Follow createPlanDocument success/error response structure:
```javascript
// Success response
{ success: true, filePath: string, fileName: string, message: string }

// Error response  
{ success: false, error: string, message: string }
```

## Integration Points
- **Export from index.js**: Add to module exports for UI consumption
- **UI Modal System**: Build delivery modal for copy/paste workflows
- **Token Efficiency**: Target 20 tokens per document vs 500+ manual creation
- **Directory Auto-Creation**: Leverage createDoc's automatic .kiro structure creation

## Testing Strategy
1. **Unit tests**: Template generation, parameter sanitization, error handling
2. **Integration tests**: File creation, directory structure, content validation
3. **UI tests**: Modal delivery system, copy/paste functionality
4. **Performance tests**: Token efficiency measurement and validation

---
*This guidance was generated by Claude to support Plan 0019 implementation.*
